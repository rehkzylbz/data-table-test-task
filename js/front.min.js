function get_data(){var e,t,n,a,l,d,r,i,s,c;(e=new XMLHttpRequest).open("GET","default.json",!0),e.send(),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){for(n in t=sort_data(t=JSON.parse(e.responseText)),(l=document.getElementById("data-table").tBodies[0]).innerHTML="",t){for(a in(d=document.createElement("tr")).id="element"+t[n].id,d.setAttribute("data-id",t[n].id),d.setAttribute("data-active",t[n].isActive),d.setAttribute("data-level",0),d.className=t[n].isActive?"table-success":"table-danger",t[n])(r=document.createElement("td")).innerHTML="parentId"===a?"":t[n][a],d.appendChild(r);0===t[n].parentId?l.appendChild(d):(i=document.getElementById("element"+t[n].parentId),s=i.getAttribute("data-level"),d.style.display="none",d.setAttribute("data-level",++s),d.setAttribute("data-parent",t[n].parentId),d.cells[0].style.paddingLeft=2*s+1+"rem",l.insertBefore(d,i.nextElementSibling),(c=document.createElement("button")).className="btn btn-primary",c.innerHTML=">",i.cells[1].innerHTML="",i.cells[1].appendChild(c),c.addEventListener("click",toggle_children))}filter_active()}}}function sort_data(e){var t,n,a,l;for(t=[],n=[],a=[],l=0;l<e.length;)0===Number(e[l].parentId)&&(n.push(e[l].id),t.push(e[l]),e.splice(l,1),l--),l++;for(;0<e.length;){for(l=0;l<e.length;)-1<n.indexOf(Number([e[l].parentId]))&&(a.push(e[l].id),t.push(e[l]),e.splice(l,1),l--),l++;n=a}return t}function toggle_children(e){var t,n,a,l;a=(n=(t=e.currentTarget).parentElement.parentElement).getAttribute("data-id"),l=n.getAttribute("data-level"),"btn btn-success"===t.className?close_children(a,l):open_children(a),filter_active()}function open_children(e){var t;for(document.getElementById("element"+e).cells[1].getElementsByTagName("button")[0].className="btn btn-success",t=document.querySelectorAll('[data-parent="'+e+'"]'),"table-row",i=0;i<t.length;i++)t[i].style.display="table-row"}function close_children(e,t){var n,a,l;0<(a=(n=document.getElementById("element"+e)).cells[1].getElementsByTagName("button")).length&&(a[0].className="btn btn-primary"),t<(l=n.nextElementSibling).getAttribute("data-level")&&(l.style.display="none",close_children(l.getAttribute("data-id"),t))}function filter_active(){var e,t,n,a,l,d,r;if(e=document.getElementById("active-checker").checked,t=document.querySelectorAll('[data-active="false"]'),e){n="none";for(var i=0;i<t.length;i++)a=t[i].getAttribute("data-id"),l=t[i].getAttribute("data-level"),t[i].style.display=n,close_children(a,l),0<l&&(d=t[i].getAttribute("data-parent"),r=document.getElementById("element"+d).getElementsByTagName("button")[0],document.querySelectorAll('[data-parent="'+d+'"][data-level="'+l+'"][data-active="true"]').length||(r.style.display=n))}else{n="table-row";for(i=0;i<t.length;i++)a=t[i].getAttribute("data-id"),0===(l=Number(t[i].getAttribute("data-level")))?t[i].style.display=n:(d=t[i].getAttribute("data-parent"),"btn btn-success"===(r=document.getElementById("element"+d).getElementsByTagName("button")[0]).className&&(t[i].style.display=n),"none"===r.style.display&&(r.style.display="block"))}}